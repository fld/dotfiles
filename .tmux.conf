### stuff i used to use with screen...
#unbind C-b
#set -g prefix C-d
#bind C-d send-prefix
# xterm scrolling
#set -g terminal-overrides 'xterm*:smcup@:rmcup@'

set -g default-terminal 'screen-256color'
set -g history-limit 1000000
set -g set-titles on
set -g set-titles-string "#W #{session_alerts}"
set -g default-command "${SHELL}" # non-login shell
set -g base-index 1 # tab numbering startpos.
set -g visual-activity on
setw -g clock-mode-colour green
setw -g automatic-rename on # dynamic tab-names
setw -g monitor-activity on
bind-key m set -g mouse # Toggle mouse-mode


### tmux-powerline
#set-option -g status on
#set-option -g status-interval 2
#set-option -g status-utf8 on
#set-option -g status-justify "centre"
#set-option -g status-left-length 60
#set-option -g status-right-length 90
#set-option -g status-left "#(~/.zplug/repos/erikw/tmux-powerline/powerline.sh left)"
#set-option -g status-right "#(~/.zplug/repos/erikw/tmux-powerline/powerline.sh right)"
#set-option -g status-bg colour237
#set-option -g status-fg colour94
#set-window-option -g window-status-current-format \
#    "#[fg=colour69, bg=colour235]⮀#[fg=colour208, bg=colour234] #I ⮁ #W #[fg=colour69, bg=colour234]⮁"
# prepend visual prefix indicator to status-left
#set-option -g status-left \
#    '#[fg=colour208, bg=colour0]#{?client_prefix,#[reverse]<Prefix>#[noreverse] ,}#(~/.zplug/repos/erikw/tmux-powerline/powerline.sh left)'

# statusline
set-option -g status on
set-option -g status-interval 2
set-option -g status-justify "centre"
set-option -g status-left-length 60
set-option -g status-right-length 120
set-option -g status-left '#[fg=colour208, bg=colour0]#{?client_prefix,#[reverse]<Prefix>#[noreverse] ,}'
set-option -g status-right \
    '#[fg=colour231, bg=colour24]⛓#{ssh_status} #[fg=colour148, bg=colour24]◀#[fg=colour234, bg=colour148]⛢ #(updays)d#[fg=colour33, bg=colour148]◀#[fg=colour234, bg=colour33]⛃ #H #[fg=colour237, bg=colour33]◀#[fg=colour167, bg=colour237]⛰ #(cut /proc/loadavg -d " " -f1,2,3) #[fg=colour235, bg=colour237]◀#[fg=colour136, bg=colour235]⛪ #(date +"%Y %b %d ")#[fg=colour234, bg=colour235]◀#[fg=colour70, bg=colour234]#(date +"◕ %H:%M ")'
set-option -g status-bg colour237
set-option -g status-fg colour94
set-window-option -g window-status-current-format \
    "#[fg=colour234, bg=colour237]#[fg=colour208, bg=colour234] #I #W #[fg=colour234, bg=colour237]"


# tpm - tmux plugin manager
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible' # community defaults
set -g @plugin 'tmux-plugins/tmux-copycat' # 'prefix + /'-searches
set -g @plugin 'tmux-plugins/tmux-pain-control' # pane management keybinds
#set -g @plugin 'soyuka/tmux-current-pane-hostname' # ssh hostname/user support
set -g @plugin 'obxhdx/tmux-ssh-status'


#### Random stuff from the interwebs... ####

# Rather than constraining window size to the maximum size of any client
# connected to the *session*, constrain window size to the maximum size of any
# client connected to *that window*. Much more reasonable.
setw -g aggressive-resize on

# Allows us to use C-a a <command> to send commands to a TMUX session inside
# another TMUX session
bind-key a send-prefix

### Move current window to session named "bg" (and create session if it does not exist)
bind-key B if-shell "! tmux has-session -t bg" "new-session -d -s bg" \; move-window -t bg

### Reload Config
bind-key R source-file ~/.tmux.conf \; display-message "~/.tmux.conf reloaded"

### SSH new window
bind-key S command-prompt -p ssh: "new-window -n %1 'ssh %1'"

### Urlview ( sudo apt-get install urlview )
bind-key u capture-pane \; save-buffer /tmp/tmux-buffer \; new-window -n "urlview" '$SHELL -c "urlview < /tmp/tmux-buffer"'



# Initialize tmuxline.vim
#source-file "$HOME/.tmuxlinerc"

# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run '~/.zplug/repos/tmux-plugins/tpm/tpm'